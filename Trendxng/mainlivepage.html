<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Trends.css">
    <style>
       
    </style>
</head>
<body>
    <section class="side-navigation" id="side-navigation">
        <img src="images/2443497a-6cf9-40d2-ae2b-13b272290941.jfif" alt="" height="80">
        <div class="side-navigation-icons-layout">
            <a href="Trends.html" class="bottom-icons">
                <div class="side-navigation-icons home-path">
                    <svg aria-label="Home" class="home-icon" fill="none"  role="img" viewBox="0 0 24 24" ><title>Home</title>
                        <path d="M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z" stroke="currentColor" stroke-linejoin="round" stroke-width="2"></path>
                    </svg>
                    <p>Home</p> 
                </div>
            </a>
            <a href="explorepage.html" class="bottom-icons">
                <div class="side-navigation-icons search-path">
                    <svg aria-label="Search" class="search-icon nav-icon" fill="currentColor"  role="img" viewBox="0 0 24 24"><title>Search</title><path d="M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                        </path><line  stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="16.511" x2="22" y1="16.511" y2="22"></line>
                    </svg>
                    <p>Search</p>
                </div>
            </a>
            <a href="golivepage.html" class="bottom-icons">
                <div class="side-navigation-icons explore-path">
                    <svg aria-label="Explore" class="add-icon-for-mobile-live-launch explore-icon launch-starts" fill="none"  role="img" viewBox="0 0 24 24"><title>Explore</title>
                        <polygon  points="13.941 13.953 7.581 16.424 10.06 10.056 16.42 7.585 13.941 13.953" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon><polygon fill-rule="evenodd" points="10.06 10.056 13.949 13.945 7.581 16.424 10.06 10.056"></polygon><circle cx="12.001" cy="12.005"  r="10.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></circle>
                    </svg>
                    <p>Explore</p>           
                </div>
            </a>
            <a href="mainlivepage.html" class="bottom-icons">
                <div class="side-navigation-icons live-path" >
                    <svg xmlns="http://www.w3.org/2000/svg" class="main-live-icon nav-icon" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="24" fill="none" height="24" stroke="currentColor" stroke-linejoin="round" stroke-width="2">
                        <path d="M5,20H13c2.757,0,5-2.243,5-5v-6c0-2.757-2.243-5-5-5H5C2.243,4,0,6.243,0,9v6C0,17.757,2.243,20,5,20ZM24,8.313v7.319c0,.757-.42,1.437-1.097,1.775-.283,.141-.587,.211-.889,.211-.421,0-.837-.135-1.189-.399-.037-.028-.825-.81-.825-.81V7.544s.786-.789,.825-.818c.604-.454,1.399-.527,2.078-.188s1.097,1.018,1.097,1.775Z"/>
                    </svg>
                    <p>Live</p>           
                </div>
            </a>
            <a href="profile.html" class="bottom-icons">
                <div class="side-navigation-icons message-path">
                    <svg  aria-label="Message" class="icon-profile-mobile message-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g id="_01_align_center" data-name="01 align center" class=""><path d="M1.444,6.669a2,2,0,0,0-.865,3.337l3.412,3.408V20h6.593l3.435,3.43a1.987,1.987,0,0,0,1.408.588,2.034,2.034,0,0,0,.51-.066,1.978,1.978,0,0,0,1.42-1.379L23.991.021ZM2,8.592l17.028-5.02L5.993,16.586v-4Zm13.44,13.424L11.413,18h-4L20.446,4.978Z"/><title>Message</title></g>
                    </svg>
                    <p>Messages</p>           
                </div>
            </a>
        </div>
        <div class="more-popup-icon">
            <p class="order-button">Order</p>
            <p class="settings-button">Settings</p>
            <a href="">About us</a>
        </div>
    </section>


    <!--<img class="microphone" src="images/60b0225b-f1ff-4536-817b-c81fd4628047-removebg-preview (1).png" alt="" height="45">
            <a href="brandsprofile.html">
                <div class="brands-stats-live">
                    <div class="mini-profile"></div>
                    <h4>Brand name</h4>
                </div>
            </a>
            
            <div class="number-of-viewers">
                <p>100</p>
                <img src="images/Screenshot_2024-05-09_035825-removebg-preview (1).png" alt="" height="20">
            </div>
            <div class="live-symbol">
                <p>Live</p>
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25" viewBox="0,0,256,256">
                    <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.33333,5.33333)"><circle cx="24" cy="24" r="6"></circle><path d="M17.09,16.789l-2.769,-2.889c-2.658,2.548 -4.321,6.127 -4.321,10.1c0,3.973 1.663,7.552 4.321,10.1l2.769,-2.889c-1.9,-1.822 -3.09,-4.378 -3.09,-7.211c0,-2.833 1.19,-5.39 3.09,-7.211z"></path><path d="M33.679,13.9l-2.769,2.889c1.9,1.822 3.09,4.378 3.09,7.211c0,2.833 -1.19,5.389 -3.09,7.211l2.769,2.889c2.658,-2.548 4.321,-6.127 4.321,-10.1c0,-3.973 -1.663,-7.552 -4.321,-10.1z"></path><g><path d="M11.561,11.021l-2.779,-2.9c-4.177,4.004 -6.782,9.636 -6.782,15.879c0,6.243 2.605,11.875 6.782,15.879l2.779,-2.9c-3.419,-3.278 -5.561,-7.879 -5.561,-12.979c0,-5.1 2.142,-9.701 5.561,-12.979z"></path><path d="M39.218,8.121l-2.779,2.9c3.419,3.278 5.561,7.879 5.561,12.979c0,5.1 -2.142,9.701 -5.561,12.979l2.779,2.9c4.177,-4.004 6.782,-9.636 6.782,-15.879c0,-6.243 -2.605,-11.875 -6.782,-15.879z"></path></g></g></g>
                </svg>
            </div>
            <div class="commenting-section-in-live">
                <input type="text" placeholder="Add a comment...">
                <svg class="send-a-comment" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><g id="_01_align_center" data-name="01 align center">
                    <path d="M1.444,6.669a2,2,0,0,0-.865,3.337l3.412,3.408V20h6.593l3.435,3.43a1.987,1.987,0,0,0,1.408.588,2.034,2.034,0,0,0,.51-.066,1.978,1.978,0,0,0,1.42-1.379L23.991.021ZM2,8.592l17.028-5.02L5.993,16.586v-4Zm13.44,13.424L11.413,18h-4L20.446,4.978Z"/></g>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="share-icon" viewBox="0 0 32 32" style="height: 30px;">
                    <path d="M2 29a1.12 1.12 0 0 1-.31 0A1 1 0 0 1 1 28v-1A19 19 0 0 1 17 8.24V4a1 1 0 0 1 1.6-.8l12 9a1 1 0 0 1 0 1.6l-12 9A1 1 0 0 1 17 22v-3.75a18.66 18.66 0 0 0-12.07 7.42l-2.12 2.92A1 1 0 0 1 2 29ZM19 6v3.12a1 1 0 0 1-.89 1 17 17 0 0 0-15 14.6l.16-.21a20.68 20.68 0 0 1 14.63-8.4 1 1 0 0 1 .77.26 1 1 0 0 1 .33.74V20l9.33-7Z" data-name="Layer 51" fill="#ffffff" class="fill-101820"/>
                </svg> 
            </div>-->  

    <div class="random-liveshow" id="masterContainer">
        <div class="master-contents">
            <div class="click-to-watch" id="clickToWatch">
                <svg xmlns="http://www.w3.org/2000/svg" id="live-loading" data-name="Layer 1" viewBox="0 0 24 24">
                    <path d="m17,7h2v10h-2V7Zm-4,17h2V0h-2v24ZM21,4v16h2V4h-2Zm-12,16h2V4h-2v16Zm-4-3h2V7h-2v10Zm-4-2h2v-6H1v6Z"/>
                </svg>
                <h1>Click to join Live</h1>
            </div>
            <div class="live-symbol">
                <p>Live</p>
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25" height="25" viewBox="0,0,256,256">
                    <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.33333,5.33333)"><circle cx="24" cy="24" r="6"></circle><path d="M17.09,16.789l-2.769,-2.889c-2.658,2.548 -4.321,6.127 -4.321,10.1c0,3.973 1.663,7.552 4.321,10.1l2.769,-2.889c-1.9,-1.822 -3.09,-4.378 -3.09,-7.211c0,-2.833 1.19,-5.39 3.09,-7.211z"></path><path d="M33.679,13.9l-2.769,2.889c1.9,1.822 3.09,4.378 3.09,7.211c0,2.833 -1.19,5.389 -3.09,7.211l2.769,2.889c2.658,-2.548 4.321,-6.127 4.321,-10.1c0,-3.973 -1.663,-7.552 -4.321,-10.1z"></path><g><path d="M11.561,11.021l-2.779,-2.9c-4.177,4.004 -6.782,9.636 -6.782,15.879c0,6.243 2.605,11.875 6.782,15.879l2.779,-2.9c-3.419,-3.278 -5.561,-7.879 -5.561,-12.979c0,-5.1 2.142,-9.701 5.561,-12.979z"></path><path d="M39.218,8.121l-2.779,2.9C39.858,14.299 42,18.9 42,24c0,5.1 -2.142,9.701 -5.561,12.979l2.779,2.9C43.395,35.875 46,30.243 46,24S43.395,12.125 39.218,8.121z"></path></g></g>
                </svg>
            </div>
        </div>
    </div>
    
    <h4>Recommended shows</h4>
    <div class="recommended-liveshow" id="videosContainer"></div>
    
    <div class="current-liveshow-mobile-page-main" id="watchLive"></div>
    
    <script src="Trends.js"></script>
    <script src="chatpage.js"></script>
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <!-- Firebase Storage SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDW8dztrdDOgDGzVfYf-V86oJwQ_hqPKcE",
            authDomain: "storage-video-26982.firebaseapp.com",
            projectId: "storage-video-26982",
            storageBucket: "storage-video-26982.appspot.com",
            messagingSenderId: "745302805245",
            appId: "1:745302805245:web:e01bf7c49c3852d8b84c94"
        };
    
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    
        // Function to list and display videos
        async function displayVideos() {
            const storageRef = firebase.storage().ref().child('videos/');
            const masterContainer = document.getElementById('masterContainer');
            const videosContainer = document.getElementById('videosContainer');
            const watchLive = document.getElementById('watchLive');
    
            try {
                const listResult = await storageRef.listAll();
    
                // Get the metadata for each video
                const videoItems = await Promise.all(listResult.items.map(async (itemRef) => {
                    const metadata = await itemRef.getMetadata();
                    return { ref: itemRef, timeCreated: metadata.timeCreated };
                }));
    
                // Sort videoItems by timeCreated in ascending order, then reverse it
                videoItems.sort((a, b) => new Date(a.timeCreated) - new Date(b.timeCreated)).reverse();
    
                // Get video URLs and create video elements
                for (let i = 0; i < videoItems.length; i++) {
                    const videoItem = videoItems[i];
                    const videoURL = await videoItem.ref.getDownloadURL();
    
                    // Create a container for video and icon
                    const videoContainer = document.createElement('div');
                    videoContainer.classList.add('video-container');
    
                    // Create video element
                    const videoElement = document.createElement('video');
                    videoElement.src = videoURL;
                    videoElement.controls = true;
    
                    // Create icon element
                    const iconElement = document.createElement('div');
                    iconElement.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" id="antenna-slide" x="0px" y="0px" width="25" height="25" viewBox="0 0 48 48">
                            <circle cx="24" cy="24" r="6" fill="#f44336"></circle>
                            <path fill="#f44336" d="M17.09,16.789L14.321,13.9C11.663,16.448,10,20.027,10,24s1.663,7.552,4.321,10.1l2.769-2.889 C15.19,29.389,14,26.833,14,24C14,21.167,15.19,18.61,17.09,16.789z"></path>
                            <path fill="#f44336" d="M33.679,13.9l-2.769,2.889C32.81,18.611,34,21.167,34,24c0,2.833-1.19,5.389-3.09,7.211l2.769,2.889 C36.337,31.552,38,27.973,38,24S36.337,16.448,33.679,13.9z"></path>
                            <g>
                                <path fill="#f44336" d="M11.561,11.021l-2.779-2.9C4.605,12.125,2,17.757,2,24s2.605,11.875,6.782,15.879l2.779-2.9 C8.142,33.701,6,29.1,6,24S8.142,14.299,11.561,11.021z"></path>
                                <path fill="#f44336" d="M39.218,8.121l-2.779,2.9C39.858,14.299,42,18.9,42,24s-2.142,9.701-5.561,12.979l2.779,2.9 C43.395,35.875,46,30.243,46,24S43.395,12.125,39.218,8.121z"></path>
                            </g>
                        </svg>
                    `;
                    iconElement.classList.add('icon');
    
                    // Append video and icon to the container
                    videoContainer.appendChild(videoElement);
                    videoContainer.appendChild(iconElement);
    
                    // Add the container to the master container for the newest video, and to the videos container for the rest
                    if (i === 0) {
                        masterContainer.appendChild(videoContainer);
                        // Add click event listener to the click-to-watch div
                        const clickToWatch = document.getElementById('clickToWatch');
                        clickToWatch.addEventListener('click', () => {
                            // Store the video URL in local storage
                            localStorage.setItem('currentVideoURL', videoURL);
                            // Redirect to the playback page
                            window.location.href = 'playback.html';
                        });
                    } else {
                        videosContainer.appendChild(videoContainer);
    
                        // Add click event listener to each video container in videosContainer
                        videoContainer.addEventListener('click', () => {
                            // Store the video URL in local storage
                            localStorage.setItem('currentVideoURL', videoURL);
                            // Redirect to the playback page
                            window.location.href = 'playback.html';
                        });
                    }
                }
            } catch (error) {
                console.error('Error listing videos:', error);
            }
        }
    
        // Call the function to display videos on page load
        window.onload = displayVideos;
    </script>
            
</body>
</html>